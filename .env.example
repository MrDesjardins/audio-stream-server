# Audio Stream Server Configuration
# Copy this file to .env and fill in your values

# Server Configuration
# development will have file watcher that is not performant for production
# Use 'development' only for local dev - production should use 'production'
ENV=production
# FASTAPI_HOST: The IP address to bind to
#   - 127.0.0.1 = localhost only (not accessible from network)
#   - 0.0.0.0 = all interfaces (accessible from network)
#   - Or use your specific local IP (e.g., 10.0.0.181)
FASTAPI_HOST=0.0.0.0
FASTAPI_API_PORT=8000

# Transcription Feature (Optional)
# Set to 'true' to enable automatic transcription and summarization
TRANSCRIPTION_ENABLED=false

# AI Provider Configuration
# Get OpenAI API key from: https://platform.openai.com/api-keys
# Get Gemini API key from: https://makersuite.google.com/app/apikey
# Get Mistral API key from: https://console.mistral.ai/api-keys
OPENAI_API_KEY=sk-...
GEMINI_API_KEY=
MISTRAL_API_KEY=

# Transcription Provider
# Options: "openai" (Whisper), "mistral" (Voxtral), or "gemini" (Gemini 2.5 Flash)
# OpenAI Whisper: Very accurate, $0.006/minute, 25MB limit
# Mistral Voxtral: Most cost-effective, $0.003/minute, 30 min limit
# Gemini: Token-based (~$0.0005-0.001/min), handles unlimited file sizes
TRANSCRIPTION_PROVIDER=openai
# Transcription Model (optional, defaults based on provider)
# OpenAI: whisper-1
# Mistral: voxtral-mini-latest
# Gemini: gemini-2.5-flash-preview-tts
# TRANSCRIPTION_MODEL=whisper-1

# Video Summarization Provider
# Options: "openai" (GPT-4o-mini) or "gemini" (Gemini 2.5 Flash)
# This is used for summarizing individual video transcripts
# OpenAI: More concise, structured summaries
# Gemini: Free tier available, good quality, faster (recommended)
# Default: gemini
SUMMARY_PROVIDER=gemini
# Summarization Model (optional, defaults based on provider)
# OpenAI: gpt-4o-mini (fast, cheap), gpt-4o (better quality)
# Gemini: gemini-2.5-flash (recommended), gemini-1.5-flash, gemini-1.5-pro
# Default: gemini-2.5-flash
# SUMMARY_MODEL=gemini-2.5-flash

# Trilium Notes Configuration
# Required if TRANSCRIPTION_ENABLED=true
# TRILIUM_URL: The URL where your Trilium instance is running
TRILIUM_URL=http://localhost:8080

# TRILIUM_ETAPI_TOKEN: Get from Trilium: Options → ETAPI → Create token
TRILIUM_ETAPI_TOKEN=

# TRILIUM_PARENT_NOTE_ID: The note ID where summaries will be stored
# Get by right-clicking a note in Trilium → "Copy Note ID"
TRILIUM_PARENT_NOTE_ID=

# === Optional Settings ===
TEMP_AUDIO_DIR=/tmp/audio-transcriptions
MAX_AUDIO_LENGTH_MINUTES=60
# Maximum number of audio files to keep in cache
AUDIO_CACHE_MAX_FILES=10

# Audio Quality (VBR scale 0-9, lower = higher quality)
# 0=~256kbps  1=~192kbps  2=~170kbps  3=~160kbps  4=~128kbps
# 5=~112kbps  6=~96kbps   7=~80kbps   8=~64kbps   9=~48kbps
AUDIO_QUALITY=4

# Pre-download next queue item this many seconds before current track ends
PREFETCH_THRESHOLD_SECONDS=30

# Database Configuration
DATABASE_PATH=./audio_history.db

# Smart Video Suggestions (Optional)
# Analyzes summaries from recently watched videos to suggest similar YouTube content
# This feature uses AI to identify themes in your viewing history and find related videos
BOOK_SUGGESTIONS_ENABLED=false
# Number of recent videos to analyze (videos with cached summaries)
BOOKS_TO_ANALYZE=10
# Number of new video suggestions to generate
SUGGESTIONS_COUNT=4
# AI provider for analyzing themes and generating suggestions
# Options: "openai" (GPT-4o-mini) or "gemini" (Gemini 2.5 Flash)
# Recommended: "gemini" for cost savings (free tier available)
# Default: gemini
SUGGESTIONS_AI_PROVIDER=gemini
# Suggestions Model (optional, defaults based on provider)
# OpenAI: gpt-4o-mini, gpt-4o
# Gemini: gemini-2.5-flash (recommended), gemini-1.5-flash, gemini-1.5-pro
# Default: gemini-2.5-flash
# SUGGESTIONS_MODEL=gemini-2.5-flash

# Weekly Summary (Optional)
# Automatically generates a comprehensive summary of all audiobooks read during the week
# Runs every Sunday at 11:00 PM Pacific time (end of ISO week: Monday-Sunday)
# Requires TRANSCRIPTION_ENABLED=true and Trilium configured
# Creates a Trilium note with:
#   - List of books read (with links to summaries)
#   - Overview of the week's reading
#   - 15 most important learnings
#   - Common themes across all books
WEEKLY_SUMMARY_ENABLED=false

# Weekly Summary AI Provider
# Options: "openai" (GPT-4o) or "gemini" (Gemini 2.5 Flash)
# This is separate from video summarization to allow different quality levels
# OpenAI GPT-4o: Highest quality, best for synthesis and theme identification
# Gemini: Good quality, free tier available, faster (recommended)
# Default: gemini
WEEKLY_SUMMARY_PROVIDER=gemini
# Weekly Summary Model (optional, defaults based on provider)
# OpenAI: gpt-4o (recommended), gpt-4o-mini
# Gemini: gemini-2.5-flash (recommended), gemini-1.5-pro
# Default: gemini-2.5-flash
# WEEKLY_SUMMARY_MODEL=gemini-2.5-flash

# Text-to-Speech (Optional)
# Enable TTS generation for weekly summaries
# Requires WEEKLY_SUMMARY_ENABLED=true
TTS_ENABLED=false

# TTS Provider
# Options: "openai" or "elevenlabs"
# OpenAI: Standard $15/1M chars (~$0.15 for 10K), HD $30/1M chars
#         6 voices (alloy, echo, fable, onyx, nova, shimmer)
#         Good quality, very affordable for long content
# ElevenLabs: Credit-based pricing, higher quality voices
#             More expensive for long-form content
# Default: openai (recommended for cost)
TTS_PROVIDER=openai

# OpenAI TTS Settings (when TTS_PROVIDER=openai)
# Voice options: alloy, echo, fable, onyx, nova, shimmer
# Model options: tts-1 (faster, cheaper), tts-1-hd (higher quality)
OPENAI_TTS_VOICE=alloy
OPENAI_TTS_MODEL=tts-1

# ElevenLabs Settings (when TTS_PROVIDER=elevenlabs)
# Get your API key from: https://elevenlabs.io/
ELEVENLABS_API_KEY=
# Voice ID to use for TTS (default: Adam - free deep American male voice)
# Free voices: Adam=pNInz6obpgDQGcFmaJgB, Rachel=21m00Tcm4TlvDq8ikWAM
# Run: uv run python list_elevenlabs_voices.py to see all available voices
ELEVENLABS_VOICE_ID=pNInz6obpgDQGcFmaJgB
# Model options: eleven_flash_v2_5 (40K chars), eleven_turbo_v2_5 (40K), eleven_multilingual_v2 (10K)
ELEVENLABS_MODEL_ID=eleven_flash_v2_5

# Directory to store weekly summary audio files
WEEKLY_SUMMARY_AUDIO_DIR=/var/audio-summaries

# Client-Side Logging (Optional)
# Remote logging helps debug issues on mobile/car displays where console access is limited
# Logs are batched and sent to the server at this interval (in milliseconds)
# Lower values = more frequent updates (better for debugging), higher values = less server load
# Default: 5000 (5 seconds)
CLIENT_LOG_BATCH_INTERVAL=5000
